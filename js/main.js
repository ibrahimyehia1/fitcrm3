document.addEventListener('DOMContentLoaded',()=>{const p=new URLSearchParams(window.location.search);const id=p.get('id');if(id){fetch('data/clients.json').then(r=>r.json()).then(d=>{const c=d.find(x=>x.id==id);const b=document.getElementById('clientDetails');if(c){b.innerHTML=`<h2>${c.name}</h2><p>Phone: ${c.phone}</p>`;}});}const t=document.querySelector('#clientsTable tbody');const s=document.getElementById('searchBox');if(t){fetch('data/clients.json').then(r=>r.json()).then(d=>{let clients=d;function render(list){t.innerHTML='';list.forEach(c=>{t.innerHTML+=`<tr><td>${c.name}</td><td>${c.phone}</td><td><a class='action-btn edit' href='client.html?id=${c.id}'>Open</a><button class='action-btn delete'>Delete</button></td></tr>`;});}render(clients);s.addEventListener('input',()=>{const q=s.value.toLowerCase();render(clients.filter(c=>c.name.toLowerCase().includes(q)));});});}});